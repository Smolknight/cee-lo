<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            background-color: black;
            color: white;
        }
        .dialog{
            width: 100%;
            height: 95vh;
            display: flex;
            align-items: center;
        }

        #story{
            height: 5vh;
            margin: 0 auto;
            font-size: 2em;
            width: auto;
        }

        #fader{
            animation-name: fader;
            animation-duration: 1s;
            animation-iteration-count: infinite;
        }

        button{
            width: 40vw;
            font-size: 3em;
            background-color: black;
            color: white;
        }
        button:hover{
            color: red;
            transition: 1s;
        }

        @keyframes fader{
            0%{
                opacity: 1;
            }
            50%{
                opacity: 0.5;
            }
            100%{
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="dialog">
        
            <p id="story"><span id="insertHere"></span><span id="fader">_</span></p>

    </div>
</body>
</html>


<script>
    //used to check which lines have been displayed
const flag={
    eraseFlag:0
}
//stores the text that needs to be displayed
const storyChange={
    //first line to be displayed
    text:`It's the year 20XX, you recently been layed off from your corporate job`
}
    //grabs where text is to be displayed
        const story=document.getElementById('insertHere')

//starts i at 0
    let i=0
    //interval that calls typer() every 50ms, starts the first cycle
    lol=setInterval(typer,45)

function typer(){
    //grabs the current line
    switch(flag.eraseFlag){
        case 1:
            storyChange.text=`timing couldn't be worse`
        break;
        case 2:
            storyChange.text=`rent is due in two weeks and you're $2000 short`
            break;
        case 3:
            storyChange.text=`Out of options, you took out a loan of $1000 from a local yakuza family`
            break;
        case 4:
            storyChange.text=`You came up with a desperate idea`
            break;
        case 5:
            storyChange.text=`you remembered seeing posts about a dark web cee-lo website on some of the forums you browse`
            break;
        case 6:
            storyChange.text=`They don't ask questions. They don't ask for personal details. No taxes, only a 5% cut`
            break;
        case 7:
            storyChange.text=`You decide to risk it all in one game`
            break;
        case 8: 
            storyChange.text=`The next five minutes of your life will determine your life's trajectory`
            break;
        case 9: 
        storyChange.text=`three outcomes`
        break;
        case 10:
            storyChange.text=`Worst case....you'll end up homeless with the yakuza hounding you for payments. Stuck with a loan impossible to pay off due to the Yakuza's insane interest rates`
            break;
        case 11:
            storyChange.text=`A more mild outcome would be having enough money to pay off your loan but still be short on rent`
            break;
        case 12:storyChange.text=`you'll still end up homeless but at least the Yakuza won't be chasing after you`
            break;
        case 13: storyChange.text=`The best case is making out thousands of dollars richer than you were before`
        break;
        case 14: storyChange.text=`five minutes`
        break;
        case 15: storyChange.text=`every point gained is a dollar earned`
        break;
        case 16: storyChange.text=`Good luck`
        break;
}
            let storyText=storyChange.text
    

    //breaks up the text and inserts the characters into an array
    let storyArray=storyText.split("")

    //displays the current character
    //i is used to cycle through every character
    story.innerHTML+=`${storyArray[i]}`
    //tells the program to move to the next letter
    i++
    console.log(i)
    //once the entire line is displayed, tells the program to stop writing
    if(i==storyArray.length){
        clearInterval(lol)

    //gives the player time to read the text before calling the functiont that erases the text, triggers after 2.5s
        setTimeout(function(){
            erase=setInterval(eraser,30)
        },2500)
    }
}



function eraser(){
    //grabs the current text displayed
    let story=document.getElementById('insertHere')
    //stores the text in a new variable
    let newText=story.textContent
    //every cycle it removes one character from the end of the line
    let finalText=newText.substr(0,i-1)
    //displays the modified text, creating an erasing effect
    story.textContent=finalText
    //i is used to keep track of remaning characters
    i--

    //once there are no more characters to erase, it stops the eraser()
    if(i==0){
        clearInterval(erase)
        flag.eraseFlag+=1

        switch(flag.eraseFlag){
            case 1:
            lol=lol=setInterval(typer,45)
            break;
            case 2:
            lol=lol=setInterval(typer,45)
            break;
            case 3:
            lol=lol=setInterval(typer,45)
            break;
            case 4:
            lol=lol=setInterval(typer,45)
            break;
            case 5:
            lol=lol=setInterval(typer,45)
            break;
            case 6:
            lol=lol=setInterval(typer,45)
            break;
            case 7:
            lol=lol=setInterval(typer,45)
            break;
            case 8:
            lol=lol=setInterval(typer,45)
            break;
            case 9:
            lol=lol=setInterval(typer,45)
            break;
            case 10:
            lol=lol=setInterval(typer,45)
            break;
            case 11:
            lol=lol=setInterval(typer,45)
            break;
            case 12:
            lol=lol=setInterval(typer,45)
            break;
            case 13:
            lol=lol=setInterval(typer,45)
            break;
            case 14:
            lol=lol=setInterval(typer,45)
            break;
            case 15:
            lol=lol=setInterval(typer,45)
            break;
            case 16:
            lol=lol=setInterval(typer,45)
            clearInterval(erase)
            flag.eraseFlag+=1
            case 17:
                document.getElementById('story').innerHTML=`<button>Play</button>`

        }
    }
}


</script>